<!DOCTYPE html>
<html lang="uk">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú–æ—ó –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Montserrat', sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            min-height: 100vh;
            color: #333;
        }

        .navbar {
            background: rgba(255, 255, 255, 0.95);
            padding: 15px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 20px rgba(0, 0, 0, 0.1);
        }

        .navbar h1 {
            font-size: 24px;
            color: #1e3c72;
        }

        .nav-links a {
            color: #1e3c72;
            text-decoration: none;
            padding: 8px 16px;
            border-radius: 8px;
            transition: 0.3s;
            font-weight: 500;
        }

        .nav-links a:hover {
            background: #e8f0fe;
        }

        .container {
            max-width: 1200px;
            margin: 30px auto;
            padding: 0 20px;
        }

        .card {
            background: white;
            border-radius: 16px;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .card-header h2 {
            color: #1e3c72;
            font-size: 22px;
        }

        .search-box {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .search-box input {
            padding: 10px 16px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 14px;
            width: 250px;
            font-family: inherit;
        }

        .search-box input:focus {
            outline: none;
            border-color: #1e3c72;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            font-size: 14px;
            transition: 0.3s;
            font-family: inherit;
            text-decoration: none;
            display: inline-block;
        }

        .btn-primary {
            background: #1e3c72;
            color: white;
        }

        .btn-primary:hover {
            background: #2a5298;
        }

        .btn-success {
            background: #10b981;
            color: white;
        }

        .btn-success:hover {
            background: #059669;
        }

        .btn-danger {
            background: #ef4444;
            color: white;
        }

        .btn-danger:hover {
            background: #dc2626;
        }

        .btn-secondary {
            background: #6b7280;
            color: white;
        }

        .btn-secondary:hover {
            background: #4b5563;
        }

        .btn-sm {
            padding: 6px 12px;
            font-size: 12px;
        }

        .orders-list {
            display: grid;
            gap: 15px;
        }

        .order-item {
            background: #f8fafc;
            border-radius: 12px;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
            transition: 0.3s;
            border: 2px solid transparent;
        }

        .order-item:hover {
            border-color: #1e3c72;
        }

        .order-info h3 {
            color: #1e3c72;
            font-size: 18px;
            margin-bottom: 8px;
        }

        .order-info .meta {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            color: #6b7280;
            font-size: 13px;
        }

        .order-info .meta span {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .order-actions {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #6b7280;
        }

        .empty-state h3 {
            font-size: 20px;
            margin-bottom: 10px;
            color: #374151;
        }

        .empty-state p {
            margin-bottom: 20px;
        }

        .stats {
            display: flex;
            gap: 20px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.15);
            padding: 15px 25px;
            border-radius: 12px;
            color: white;
        }

        .stat-card .value {
            font-size: 28px;
            font-weight: 700;
        }

        .stat-card .label {
            font-size: 12px;
            opacity: 0.8;
        }

        .badge {
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 600;
        }

        .badge-draft {
            background: #fef3c7;
            color: #92400e;
        }

        .badge-complete {
            background: #d1fae5;
            color: #065f46;
        }

        .badge-sent {
            background: #dbeafe;
            color: #1e40af;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: 16px;
            padding: 30px;
            width: 90%;
            max-width: 500px;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal-header h3 {
            color: #1e3c72;
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #6b7280;
        }

        .modal-footer {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 20px;
        }

        @media (max-width: 768px) {
            .navbar {
                flex-direction: column;
                gap: 10px;
            }

            .order-item {
                flex-direction: column;
                align-items: flex-start;
            }

            .order-actions {
                width: 100%;
            }

            .btn {
                flex: 1;
                text-align: center;
            }
        }
    </style>
</head>

<body>
    <nav class="navbar">
        <h1>üìã –ú–æ—ó –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</h1>
        <div class="nav-links">
            <a href="index.html">üè† –ì–æ–ª–æ–≤–Ω–∞</a>
            <a href="order.html">‚ûï –ù–æ–≤–µ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</a>
            <a href="catalogs.html">üìö –î–æ–≤—ñ–¥–Ω–∏–∫–∏</a>
        </div>
    </nav>

    <div class="container">
        <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
        <div class="stats" id="stats"></div>

        <!-- –°–ø–∏—Å–æ–∫ –∑–∞–º–æ–≤–ª–µ–Ω—å -->
        <div class="card">
            <div class="card-header">
                <h2>–ó–±–µ—Ä–µ–∂–µ–Ω—ñ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</h2>
                <div class="search-box">
                    <input type="text" id="searchInput" placeholder="üîç –ü–æ—à—É–∫ –ø–æ –Ω–æ–º–µ—Ä—É...">
                    <a href="order.html" class="btn btn-primary">‚ûï –ù–æ–≤–µ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</a>
                </div>
            </div>
            <div id="ordersList" class="orders-list"></div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ –≤–∏–¥–∞–ª–µ–Ω–Ω—è -->
    <div class="modal" id="deleteModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>‚ö†Ô∏è –í–∏–¥–∞–ª–∏—Ç–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è?</h3>
                <button class="close-btn" onclick="closeDeleteModal()">&times;</button>
            </div>
            <p>–í–∏ –≤–ø–µ–≤–Ω–µ–Ω—ñ, —â–æ —Ö–æ—á–µ—Ç–µ –≤–∏–¥–∞–ª–∏—Ç–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è <strong id="deleteOrderName"></strong>?</p>
            <p style="color:#6b7280; font-size:13px; margin-top:10px;">–¶—é –¥—ñ—é –Ω–µ–º–æ–∂–ª–∏–≤–æ —Å–∫–∞—Å—É–≤–∞—Ç–∏.</p>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeDeleteModal()">–°–∫–∞—Å—É–≤–∞—Ç–∏</button>
                <button class="btn btn-danger" onclick="confirmDelete()">–í–∏–¥–∞–ª–∏—Ç–∏</button>
            </div>
        </div>
    </div>

    <script>
        let orders = [];
        let deleteIndex = null;

        // –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è
        document.addEventListener('DOMContentLoaded', () => {
            loadOrders();
            renderStats();
            renderOrders();

            document.getElementById('searchInput').addEventListener('input', filterOrders);
        });

        function loadOrders() {
            // –ó–∞–≤–∞–Ω—Ç–∞–∂—É—î–º–æ –∑ localStorage
            const saved = localStorage.getItem('orders_list');
            if (saved) {
                orders = JSON.parse(saved);
            } else {
                // –î–µ–º–æ –¥–∞–Ω—ñ
                orders = [
                    {
                        id: '001',
                        number: '–ö-2026-001',
                        date: '2026-01-15',
                        status: 'complete',
                        client: '–Ü–≤–∞–Ω–µ–Ω–∫–æ –û.–ü.',
                        summary: '–ö—É—Ö–Ω—è –±—ñ–ª–∞, Blum, Egger'
                    },
                    {
                        id: '002',
                        number: '–ö-2026-002',
                        date: '2026-01-16',
                        status: 'draft',
                        client: '–ü–µ—Ç—Ä–µ–Ω–∫–æ –ú.–Ü.',
                        summary: '–ö—É—Ö–Ω—è —Å—ñ—Ä–∞, Hettich'
                    }
                ];
            }

            // –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ —á–µ—Ä–Ω–µ—Ç–∫—É
            const draft = localStorage.getItem('order_draft');
            if (draft) {
                const draftData = JSON.parse(draft);
                const draftExists = orders.some(o => o.id === 'draft');
                if (!draftExists && draftData.orderNumber) {
                    orders.unshift({
                        id: 'draft',
                        number: draftData.orderNumber || '–ß–µ—Ä–Ω–µ—Ç–∫–∞',
                        date: new Date().toISOString().split('T')[0],
                        status: 'draft',
                        client: '',
                        summary: '–ù–µ–∑–∞–≤–µ—Ä—à–µ–Ω–µ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è'
                    });
                }
            }
        }

        function saveOrders() {
            localStorage.setItem('orders_list', JSON.stringify(orders.filter(o => o.id !== 'draft')));
        }

        function renderStats() {
            const total = orders.length;
            const drafts = orders.filter(o => o.status === 'draft').length;
            const complete = orders.filter(o => o.status === 'complete').length;

            document.getElementById('stats').innerHTML = `
                <div class="stat-card">
                    <div class="value">${total}</div>
                    <div class="label">–í—Å—å–æ–≥–æ –∑–∞–º–æ–≤–ª–µ–Ω—å</div>
                </div>
                <div class="stat-card">
                    <div class="value">${drafts}</div>
                    <div class="label">–ß–µ—Ä–Ω–µ—Ç–æ–∫</div>
                </div>
                <div class="stat-card">
                    <div class="value">${complete}</div>
                    <div class="label">–ó–∞–≤–µ—Ä—à–µ–Ω–∏—Ö</div>
                </div>
            `;
        }

        function renderOrders(filteredOrders = null) {
            const list = document.getElementById('ordersList');
            const data = filteredOrders || orders;

            if (data.length === 0) {
                list.innerHTML = `
                    <div class="empty-state">
                        <h3>üì≠ –ó–∞–º–æ–≤–ª–µ–Ω—å –ø–æ–∫–∏ –Ω–µ–º–∞—î</h3>
                        <p>–°—Ç–≤–æ—Ä—ñ—Ç—å –ø–µ—Ä—à–µ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</p>
                        <a href="order.html" class="btn btn-primary">‚ûï –ù–æ–≤–µ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</a>
                    </div>
                `;
                return;
            }

            list.innerHTML = data.map((order, index) => `
                <div class="order-item">
                    <div class="order-info">
                        <h3>
                            ${order.number}
                            <span class="badge badge-${order.status}">${getStatusLabel(order.status)}</span>
                        </h3>
                        <div class="meta">
                            <span>üìÖ ${formatDate(order.date)}</span>
                            ${order.client ? `<span>üë§ ${order.client}</span>` : ''}
                            ${order.summary ? `<span>üìù ${order.summary}</span>` : ''}
                        </div>
                    </div>
                    <div class="order-actions">
                        ${order.id === 'draft'
                    ? `<a href="order.html" class="btn btn-success btn-sm">‚úèÔ∏è –ü—Ä–æ–¥–æ–≤–∂–∏—Ç–∏</a>`
                    : `<button class="btn btn-primary btn-sm" onclick="viewOrder('${order.id}')">üëÅÔ∏è –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏</button>`
                }
                        <button class="btn btn-secondary btn-sm" onclick="duplicateOrder(${index})">üìã –ö–æ–ø—ñ—é–≤–∞—Ç–∏</button>
                        <button class="btn btn-danger btn-sm" onclick="deleteOrder(${index})">üóëÔ∏è</button>
                    </div>
                </div>
            `).join('');
        }

        function getStatusLabel(status) {
            const labels = {
                'draft': '–ß–µ—Ä–Ω–µ—Ç–∫–∞',
                'complete': '–ó–∞–≤–µ—Ä—à–µ–Ω–æ',
                'sent': '–í—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–æ'
            };
            return labels[status] || status;
        }

        function formatDate(dateStr) {
            const date = new Date(dateStr);
            return date.toLocaleDateString('uk');
        }

        function filterOrders() {
            const query = document.getElementById('searchInput').value.toLowerCase();
            const filtered = orders.filter(o =>
                o.number.toLowerCase().includes(query) ||
                (o.client && o.client.toLowerCase().includes(query)) ||
                (o.summary && o.summary.toLowerCase().includes(query))
            );
            renderOrders(filtered);
        }

        function viewOrder(id) {
            alert(`–ü–µ—Ä–µ–≥–ª—è–¥ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è ${id}\n\n(–§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª –±—É–¥–µ –¥–æ–¥–∞–Ω–æ –ø—ñ–∑–Ω—ñ—à–µ)`);
        }

        function duplicateOrder(index) {
            const order = orders[index];
            const newOrder = {
                ...order,
                id: Date.now().toString(),
                number: order.number + ' (–∫–æ–ø—ñ—è)',
                date: new Date().toISOString().split('T')[0],
                status: 'draft'
            };
            orders.unshift(newOrder);
            saveOrders();
            renderStats();
            renderOrders();
        }

        function deleteOrder(index) {
            deleteIndex = index;
            document.getElementById('deleteOrderName').textContent = orders[index].number;
            document.getElementById('deleteModal').classList.add('active');
        }

        function closeDeleteModal() {
            document.getElementById('deleteModal').classList.remove('active');
        }

        function confirmDelete() {
            const order = orders[deleteIndex];

            // –Ø–∫—â–æ —Ü–µ —á–µ—Ä–Ω–µ—Ç–∫–∞ ‚Äî –≤–∏–¥–∞–ª—è—î–º–æ –∑ localStorage
            if (order.id === 'draft') {
                localStorage.removeItem('order_draft');
            }

            orders.splice(deleteIndex, 1);
            saveOrders();
            closeDeleteModal();
            renderStats();
            renderOrders();
        }
    </script>
</body>

</html>